<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="https://emojiapi.dev/api/v1/key/64.png" />
  <title>üîê Generador de Claves</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --color-claro: #ffffff;
      --color-oscuro: #121212;
    }

    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 40px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      text-align: center;
      background: linear-gradient(135deg, #ff0080, #ad02d8);
      color: white;
      position: relative;
      overflow: hidden;
    }

    body.modo-oscuro {
      background: linear-gradient(135deg, #121212, #1f1f1f);
      color: white;
    }

    h1 {
      font-size: 2.2rem;
      margin-bottom: 20px;
      z-index: 1;
    }

    #clave {
      font-size: 4rem;
      letter-spacing: 6px;
      font-weight: 700;
      background: rgba(255, 255, 255, 0.15);
      padding: 20px 40px;
      border-radius: 20px;
      margin: 20px 0;
      backdrop-filter: blur(10px);
      user-select: none;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      z-index: 1;
      animation: salto 0.5s ease;
    }

    @keyframes salto {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }

    .botones {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
      z-index: 1;
    }

    button {
      font-size: 1rem;
      padding: 10px 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffff;
      color: #3a7bd5;
      transition: background 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    button:hover {
      background: #e0e0e0;
    }

    #contador {
      font-weight: 600;
      margin-bottom: 15px;
      font-size: 1.1rem;
      z-index: 1;
    }

    #historial {
      max-width: 400px;
      width: 100%;
      text-align: left;
      z-index: 1;
    }

    #historial h2 {
      font-size: 1.2rem;
      margin-bottom: 10px;
    }

    #historial ul {
      list-style: none;
      padding: 0;
    }

    #historial li {
      background: rgba(255, 255, 255, 0.15);
      color: #fff;
      padding: 10px 15px;
      margin-bottom: 8px;
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .hora {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    /* Fondo part√≠culas */
    #fondo-animado {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="fondo-animado"></div>
  <h1>Clave Aleatoria Divertida</h1>
  <div id="contador">Claves generadas: 0</div>
  <div id="clave">------</div>
  <div class="botones">
    <button onclick="generarClave()">Generar Clave</button>
    <button onclick="copiarClave()">Copiar Clave</button>
    <button onclick="borrarHistorial()">Borrar Historial</button>
    <button onclick="toggleSonido()" id="boton-sonido">üîä Sonido: ON</button>
    <button onclick="cambiarModo()" id="modo">üåô Modo Oscuro</button>
  </div>

  <div id="historial">
    <h2>Historial reciente</h2>
    <ul id="lista-claves"></ul>
  </div>

  <!-- Librer√≠a de part√≠culas -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

  <script>
    // Part√≠culas
    particlesJS("fondo-animado", {
      particles: {
        number: { value: 80, density: { enable: true, value_area: 800 } },
        color: { value: "#ffffff" },
        shape: { type: "circle" },
        opacity: { value: 0.3 },
        size: { value: 4, random: true },
        line_linked: {
          enable: true,
          distance: 150,
          color: "#ffffff",
          opacity: 0.4,
          width: 1,
        },
        move: {
          enable: true,
          speed: 2,
          direction: "none",
          out_mode: "out"
        },
      },
      interactivity: {
        events: {
          onhover: { enable: true, mode: "repulse" },
          onclick: { enable: true, mode: "push" }
        },
        modes: {
          repulse: { distance: 100 },
          push: { particles_nb: 4 }
        },
      },
      retina_detect: true,
    });

    // Funcionalidad
    let claveActual = "";
    let contador = 0;
    let sonidoActivo = true;
    const lista = document.getElementById('lista-claves');
    const contadorDiv = document.getElementById('contador');
    const claveDiv = document.getElementById('clave');
    const sonidoGenerar = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-game-click-1114.mp3');
    const sonidoCopiar = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3');

    function generarClave() {
      const nuevaClave = Math.floor(100000 + Math.random() * 900000).toString();
      claveActual = nuevaClave;
      claveDiv.textContent = nuevaClave;
      agregarAlHistorial(nuevaClave);
      contador++;
      contadorDiv.textContent = `Claves generadas: ${contador}`;
      if (sonidoActivo) sonidoGenerar.play();
    }

    function copiarClave() {
      if (!claveActual) return;
      navigator.clipboard.writeText(claveActual)
        .then(() => {
          alert("Clave copiada al portapapeles");
          if (sonidoActivo) sonidoCopiar.play();
        });
    }

    function agregarAlHistorial(clave) {
      const nueva = document.createElement('li');
      const hora = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      nueva.innerHTML = `<span>${clave}</span><span class="hora">${hora}</span>`;
      lista.prepend(nueva);
      let historial = JSON.parse(localStorage.getItem('historial')) || [];
      historial.push({ clave, hora });
      localStorage.setItem('historial', JSON.stringify(historial));
      if (lista.childElementCount > 5) lista.removeChild(lista.lastChild);
    }

    function cargarHistorial() {
      let historial = JSON.parse(localStorage.getItem('historial')) || [];
      historial.slice(-5).forEach(item => {
        const nueva = document.createElement('li');
        nueva.innerHTML = `<span>${item.clave}</span><span class="hora">${item.hora}</span>`;
        lista.prepend(nueva);
      });
    }

    function borrarHistorial() {
      localStorage.removeItem('historial');
      lista.innerHTML = "";
    }

    function toggleSonido() {
      sonidoActivo = !sonidoActivo;
      document.getElementById("boton-sonido").textContent = sonidoActivo ? "üîä Sonido: ON" : "üîá Sonido: OFF";
    }

    function cambiarModo() {
      document.body.classList.toggle("modo-oscuro");
      const esOscuro = document.body.classList.contains("modo-oscuro");
      document.getElementById("modo").textContent = esOscuro ? "‚òÄÔ∏è Modo Claro" : "üåô Modo Oscuro";
    }

    window.onload = cargarHistorial;
  </script>
</body>
</html>
