<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="https://emojiapi.dev/api/v1/key/64.png" />
  <title>üîê Generador de Claves + üéÆ Mini Juego</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --color-claro: #ffffff;
      --color-oscuro: #121212;
    }

    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 40px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      text-align: center;
      background: linear-gradient(135deg, #ff0080, #ad02d8);
      color: white;
      position: relative;
      overflow: hidden;
    }

    body.modo-oscuro {
      background: linear-gradient(135deg, #121212, #1f1f1f);
      color: white;
    }

    h1 {
      font-size: 2.2rem;
      margin-bottom: 20px;
      z-index: 1;
    }

    #clave {
      font-size: 4rem;
      letter-spacing: 6px;
      font-weight: 700;
      background: rgba(255, 255, 255, 0.15);
      padding: 20px 40px;
      border-radius: 20px;
      margin: 20px 0;
      backdrop-filter: blur(10px);
      user-select: none;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      z-index: 1;
      animation: salto 0.5s ease;
    }

    @keyframes salto {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }

    .botones {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
      z-index: 1;
    }

    button {
      font-size: 1rem;
      padding: 10px 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffff;
      color: #3a7bd5;
      transition: background 0.3s ease, transform 0.2s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    button:hover {
      background: #e0e0e0;
      transform: translateY(-2px);
    }

    #contador {
      font-weight: 600;
      margin-bottom: 15px;
      font-size: 1.1rem;
      z-index: 1;
    }

    #historial {
      max-width: 400px;
      width: 100%;
      text-align: left;
      z-index: 1;
    }

    #historial h2 {
      font-size: 1.2rem;
      margin-bottom: 10px;
    }

    #historial ul {
      list-style: none;
      padding: 0;
    }

    #historial li {
      background: rgba(255, 255, 255, 0.15);
      color: #fff;
      padding: 10px 15px;
      margin-bottom: 8px;
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: transform 0.2s ease;
    }

    #historial li:hover {
      transform: translateX(5px);
    }

    .hora {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    /* Juego de cazar emojis */
    .emoji-cazable {
      position: fixed;
      font-size: 2rem;
      cursor: pointer;
      user-select: none;
      z-index: 5;
      animation: flotar 3s infinite ease-in-out;
    }

    @keyframes flotar {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .emoji-cazable:hover {
      transform: scale(1.2);
    }

    .emoji-cazable.capturado {
      animation: capturado 0.5s forwards;
    }

    @keyframes capturado {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(2); opacity: 0; }
    }

    #contador-juego {
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 1.2rem;
      background: rgba(0, 0, 0, 0.5);
      padding: 10px 20px;
      border-radius: 10px;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* Fondo part√≠culas */
    #fondo-animado {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      pointer-events: none;
    }

    /* Mensaje especial */
    .mensaje-especial {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 3rem;
      font-weight: bold;
      z-index: 20;
      animation: mensajeAnimacion 2s forwards;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
    }

    @keyframes mensajeAnimacion {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
      30% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
      70% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
    }
  </style>
</head>
<body>
  <div id="fondo-animado"></div>
  <div id="contador-juego">üéØ <span id="puntos">0</span> puntos</div>
  <h1>üîê Generador de Claves + üéÆ Mini Juego</h1>
  <div id="contador">Claves generadas: <span id="contador-numero">0</span></div>
  <div id="clave">------</div>
  <div class="botones">
    <button onclick="generarClave()">üé≤ Generar Clave</button>
    <button onclick="copiarClave()">üìã Copiar Clave</button>
    <button onclick="borrarHistorial()">üóëÔ∏è Borrar Historial</button>
    <button onclick="toggleSonido()" id="boton-sonido">üîä Sonido: ON</button>
    <button onclick="cambiarModo()" id="modo">üåô Modo Oscuro</button>
    <button onclick="iniciarJuego()" id="boton-juego">‚ñ∂Ô∏è Iniciar Juego</button>
  </div>

  <div id="historial">
    <h2>Historial reciente</h2>
    <ul id="lista-claves"></ul>
  </div>

  <!-- Librer√≠a de part√≠culas -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

  <script>
    // Variables globales
    let claveActual = "";
    let contador = 0;
    let sonidoActivo = true;
    let juegoActivo = false;
    let puntos = 0;
    let intervaloEmojis;
    let velocidadJuego = 2000; // milisegundos entre emojis
    const lista = document.getElementById('lista-claves');
    const contadorDiv = document.getElementById('contador-numero');
    const claveDiv = document.getElementById('clave');
    const puntosDiv = document.getElementById('puntos');
    const sonidoGenerar = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-game-click-1114.mp3');
    const sonidoCopiar = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3');
    const sonidoCaptura = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3');
    const sonidoEspecial = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3');
    
    // Emojis disponibles para el juego
    const emojis = ['üîë', 'üîí', 'üîì', 'üîè', 'üîê', 'üîç', 'üíé', 'üíç', 'üíº', 'üì±', 'üíª', '‚å®Ô∏è', 'üñ±Ô∏è', 'üíæ', 'üíø', 'üìÄ', 'üéÆ', 'üëæ', 'üïπÔ∏è', 'üé≤', 'üß©', 'üéØ', 'üé∞', 'üé≥', 'üèÜ', 'ü•á', 'ü•à', 'ü•â', 'üèÖ', 'üéñÔ∏è', 'üèµÔ∏è', 'üíê', 'üå∏', 'üíÆ', 'üèµÔ∏è', 'üåπ', 'ü•Ä', 'üå∫', 'üåª', 'üåº', 'üå∑', 'üå±', 'üå≤', 'üå≥', 'üå¥', 'üåµ', 'üåæ', 'üåø', 'üçÄ', 'üçÅ', 'üçÇ', 'üçÉ', 'üçÑ', 'üçÖ', 'üçÜ', 'üçá', 'üçà', 'üçâ', 'üçä', 'üçã', 'üçå', 'üçç', 'ü•≠', 'üçé', 'üçè', 'üçê', 'üçë', 'üçí', 'üçì', 'ü•ù', 'üçÖ', 'ü••', 'ü•ë', 'üçÜ', 'ü•î', 'ü•ï', 'üåΩ', 'üå∂Ô∏è', 'ü•í', 'ü•¨', 'ü•¶', 'üßÑ', 'üßÖ', 'üçÑ', 'ü•ú', 'üå∞', 'üçû', 'ü•ê', 'ü•ñ', 'ü•®', 'ü•Ø', 'ü•û', 'üßá', 'üßÄ', 'üçñ', 'üçó', 'ü•©', 'ü•ì', 'üçî', 'üçü', 'üçï', 'üå≠', 'ü•™', 'üåÆ', 'üåØ', 'ü•ô', 'üßÜ', 'ü•ö', 'üç≥', 'ü•ò', 'üç≤', 'ü•£', 'ü•ó', 'üçø', 'üßà', 'üßÇ', 'ü•´', 'üç±', 'üçò', 'üçô', 'üçö', 'üçõ', 'üçú', 'üçù', 'üç†', 'üç¢', 'üç£', 'üç§', 'üç•', 'ü•Æ', 'üç°', 'ü•ü', 'ü•†', 'ü•°', 'ü¶™', 'üç¶', 'üçß', 'üç®', 'üç©', 'üç™', 'üéÇ', 'üç∞', 'üßÅ', 'ü•ß', 'üç´', 'üç¨', 'üç≠', 'üçÆ', 'üçØ', 'üçº', 'ü•õ', '‚òï', 'üçµ', 'üç∂', 'üçæ', 'üç∑', 'üç∏', 'üçπ', 'üç∫', 'üçª', 'ü•Ç', 'ü•É', 'ü•§', 'üßÉ', 'üßâ', 'üßä', 'ü•¢', 'üçΩÔ∏è', 'üç¥', 'ü•Ñ', 'üî™', 'üè∫'];

    // Part√≠culas de fondo
    particlesJS("fondo-animado", {
      particles: {
        number: { value: 80, density: { enable: true, value_area: 800 } },
        color: { value: "#ffffff" },
        shape: { type: "circle" },
        opacity: { value: 0.3 },
        size: { value: 4, random: true },
        line_linked: {
          enable: true,
          distance: 150,
          color: "#ffffff",
          opacity: 0.4,
          width: 1,
        },
        move: {
          enable: true,
          speed: 2,
          direction: "none",
          out_mode: "out"
        },
      },
      interactivity: {
        events: {
          onhover: { enable: true, mode: "repulse" },
          onclick: { enable: true, mode: "push" }
        },
        modes: {
          repulse: { distance: 100 },
          push: { particles_nb: 4 }
        },
      },
      retina_detect: true,
    });

    // Funci√≥n para crear un emoji en posici√≥n aleatoria
    function crearEmoji() {
      if (!juegoActivo) return;
      
      const emoji = document.createElement('div');
      emoji.className = 'emoji-cazable';
      
      // Seleccionar un emoji aleatorio
      emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      
      // Posicionar aleatoriamente
      emoji.style.left = Math.random() * (window.innerWidth - 100) + 'px';
      emoji.style.top = Math.random() * (window.innerHeight - 100) + 'px';
      
      // Tama√±o aleatorio
      const size = Math.random() * 1.5 + 1;
      emoji.style.fontSize = `${size}rem`;
      
      // Evento al hacer clic
      emoji.addEventListener('click', () => {
        capturarEmoji(emoji);
      });
      
      // Desaparecer despu√©s de un tiempo
      setTimeout(() => {
        if (emoji.parentNode) {
          emoji.remove();
        }
      }, 5000);
      
      document.body.appendChild(emoji);
    }

    // Funci√≥n para capturar un emoji
    function capturarEmoji(emoji) {
      emoji.classList.add('capturado');
      
      // Determinar puntos basados en el emoji
      let puntosObtenidos = 1;
      const emojiTexto = emoji.textContent;
      
      if (['üîë', 'üîí', 'üíé', 'üèÜ'].includes(emojiTexto)) {
        puntosObtenidos = 5;
      } else if (['üéÆ', 'üëæ', 'üíç', 'ü•á'].includes(emojiTexto)) {
        puntosObtenidos = 3;
      }
      
      puntos += puntosObtenidos;
      puntosDiv.textContent = puntos;
      
      // Mostrar mensaje de puntos
      const mensaje = document.createElement('div');
      mensaje.className = 'mensaje-especial';
      mensaje.textContent = `+${puntosObtenidos}`;
      mensaje.style.color = puntosObtenidos > 1 ? '#ffcc00' : '#ffffff';
      document.body.appendChild(mensaje);
      
      // Sonido
      if (sonidoActivo) {
        if (puntosObtenidos > 1) {
          sonidoEspecial.currentTime = 0;
          sonidoEspecial.play();
        } else {
          sonidoCaptura.currentTime = 0;
          sonidoCaptura.play();
        }
      }
      
      // Eliminar despu√©s de la animaci√≥n
      setTimeout(() => {
        if (emoji.parentNode) {
          emoji.remove();
        }
        mensaje.remove();
      }, 2000);
    }

    // Iniciar o detener el juego
    function iniciarJuego() {
      juegoActivo = !juegoActivo;
      const botonJuego = document.getElementById('boton-juego');
      
      if (juegoActivo) {
        botonJuego.textContent = '‚èπÔ∏è Detener Juego';
        botonJuego.style.background = '#ffcc00';
        intervaloEmojis = setInterval(crearEmoji, velocidadJuego);
      } else {
        botonJuego.textContent = '‚ñ∂Ô∏è Iniciar Juego';
        botonJuego.style.background = '';
        clearInterval(intervaloEmojis);
        
        // Eliminar todos los emojis restantes
        document.querySelectorAll('.emoji-cazable').forEach(emoji => emoji.remove());
      }
    }

    // Funcionalidad del generador de claves
    function generarClave() {
      const nuevaClave = Math.floor(100000 + Math.random() * 900000).toString();
      claveActual = nuevaClave;
      claveDiv.textContent = nuevaClave;
      agregarAlHistorial(nuevaClave);
      contador++;
      contadorDiv.textContent = contador;
      
      // Efecto visual especial
      claveDiv.style.animation = 'none';
      setTimeout(() => {
        claveDiv.style.animation = 'salto 0.5s ease';
      }, 10);
      
      // Sonido
      if (sonidoActivo) {
        sonidoGenerar.currentTime = 0;
        sonidoGenerar.play();
      }
      
      // Crear emojis especiales al generar clave
      if (juegoActivo) {
        crearEmojiEspecial();
      }
    }

    // Crear emoji especial cuando se genera una clave
    function crearEmojiEspecial() {
      const emoji = document.createElement('div');
      emoji.className = 'emoji-cazable';
      emoji.textContent = 'üîë';
      emoji.style.fontSize = '3rem';
      emoji.style.left = Math.random() * (window.innerWidth - 100) + 'px';
      emoji.style.top = Math.random() * (window.innerHeight - 100) + 'px';
      
      emoji.addEventListener('click', () => {
        capturarEmoji(emoji);
      });
      
      setTimeout(() => {
        if (emoji.parentNode) {
          emoji.remove();
        }
      }, 5000);
      
      document.body.appendChild(emoji);
    }

    function copiarClave() {
      if (!claveActual) return;
      navigator.clipboard.writeText(claveActual)
        .then(() => {
          // Mensaje especial
          const mensaje = document.createElement('div');
          mensaje.className = 'mensaje-especial';
          mensaje.textContent = 'üìã ¬°Copiado!';
          mensaje.style.color = '#00ff99';
          document.body.appendChild(mensaje);
          
          setTimeout(() => {
            mensaje.remove();
          }, 2000);
          
          if (sonidoActivo) {
            sonidoCopiar.currentTime = 0;
            sonidoCopiar.play();
          }
        });
    }

    function agregarAlHistorial(clave) {
      const nueva = document.createElement('li');
      const hora = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      nueva.innerHTML = `<span>${clave}</span><span class="hora">${hora}</span>`;
      lista.prepend(nueva);
      
      // Guardar en localStorage
      let historial = JSON.parse(localStorage.getItem('historial')) || [];
      historial.push({ clave, hora });
      localStorage.setItem('historial', JSON.stringify(historial));
      
      // Mantener solo 5 elementos en la lista
      if (lista.childElementCount > 5) lista.removeChild(lista.lastChild);
    }

    function cargarHistorial() {
      let historial = JSON.parse(localStorage.getItem('historial')) || [];
      historial.slice(-5).forEach(item => {
        const nueva = document.createElement('li');
        nueva.innerHTML = `<span>${item.clave}</span><span class="hora">${item.hora}</span>`;
        lista.prepend(nueva);
      });
    }

    function borrarHistorial() {
      if (confirm('¬øEst√°s seguro de que quieres borrar todo el historial?')) {
        localStorage.removeItem('historial');
        lista.innerHTML = "";
      }
    }

    function toggleSonido() {
      sonidoActivo = !sonidoActivo;
      document.getElementById("boton-sonido").textContent = sonidoActivo ? "üîä Sonido: ON" : "üîá Sonido: OFF";
    }

    function cambiarModo() {
      document.body.classList.toggle("modo-oscuro");
      const esOscuro = document.body.classList.contains("modo-oscuro");
      document.getElementById("modo").textContent = esOscuro ? "‚òÄÔ∏è Modo Claro" : "üåô Modo Oscuro";
    }

    window.onload = function() {
      cargarHistorial();
      
      // Cargar contador de claves
      const historial = JSON.parse(localStorage.getItem('historial')) || [];
      contador = historial.length;
      contadorDiv.textContent = contador;
      
      // Iniciar juego autom√°ticamente
      setTimeout(iniciarJuego, 2000);
    };
  </script>
</body>
</html>